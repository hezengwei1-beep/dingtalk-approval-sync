# 🚀 开始使用指南

## 当前状态

根据系统检查，您需要完成以下步骤：

### ✅ 已完成
- ✅ 项目代码已创建
- ✅ 代码模块完整
- ✅ 目录结构正确
- ✅ 日志目录已创建

### ⚠️  待完成
- ⚠️  需要安装依赖包
- ⚠️  需要创建配置文件

## 立即执行的3个步骤

### 步骤1：安装依赖包

```bash
# 确保您在项目目录下
cd "/Users/mac/Projects/钉钉审批流程"

# 如果还没有创建虚拟环境，先创建
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate  # Mac/Linux
# 或 Windows: venv\Scripts\activate

# 安装依赖包
pip install -r requirements.txt
```

### 步骤2：创建配置文件

```bash
# 复制配置文件模板
cp config.yaml.example config.yaml

# 编辑配置文件（使用你喜欢的编辑器）
# Mac/Linux:
vim config.yaml
# 或
nano config.yaml

# Windows:
notepad config.yaml
```

### 步骤3：填写配置信息

编辑 `config.yaml`，填写以下信息：

#### 3.1 钉钉应用信息

1. 访问 [钉钉开放平台](https://open.dingtalk.com/)
2. 创建企业内部应用，获取 **AppKey** 和 **AppSecret**
3. 开通权限：工作台管理、审批流程管理（只读）
4. 填写到配置文件：

```yaml
dingtalk:
  app_key: "填入你的AppKey"
  app_secret: "填入你的AppSecret"
```

#### 3.2 飞书应用信息

1. 访问 [飞书开发者后台](https://open.feishu.cn/app)
2. 创建企业自建应用，获取 **App ID** 和 **App Secret**
3. 开通权限：多维表格相关权限
4. 创建飞书多维表格（按文档创建字段）
5. 获取 **app_token** 和 **table_id**
6. 填写到配置文件：

```yaml
feishu:
  app_id: "填入你的AppID"
  app_secret: "填入你的AppSecret"
  app_token: "填入你的app_token"
  tables:
    main: "填入主表table_id"
    action: "填入明细表table_id"  # 可选
```

#### 3.3 飞书机器人（可选）

如需告警功能：
1. 在飞书群创建机器人
2. 复制 **Webhook地址**
3. 填写到配置文件：

```yaml
notification:
  enabled: true
  webhook_url: "填入你的webhook地址"
```

## 验证和测试

### 验证配置

```bash
# 运行配置检查脚本
python test_config.py
```

确保所有检查项都通过 ✅

### 测试运行

```bash
# 首次测试（同步最近7天数据）
python sync.py --init

# 查看日志
tail -f logs/sync.log
```

### 验证数据

1. 登录飞书，打开多维表格
2. 检查是否有数据写入
3. 验证字段是否正确

## 详细文档

- 📖 **README.md** - 项目说明和功能介绍
- 📖 **QUICK_START.md** - 快速开始指南
- 📖 **NEXT_STEPS.md** - 下一步详细操作指南
- 📖 **DEPLOYMENT.md** - 部署指南
- 📖 **dingtalk_to_feishu_plan.md** - 完整方案文档

## 快速命令参考

```bash
# 检查配置
python test_config.py

# 初始化同步（最近7天）
python sync.py --init

# 增量同步（最近24小时）
python sync.py

# 指定时间范围同步
python sync.py --start-time "2025-01-10 00:00:00" --end-time "2025-01-11 23:59:59"

# 全量校验（最近30天）
python sync.py --full-check

# 查看日志
tail -f logs/sync.log
```

## 需要帮助？

1. 运行 `python test_config.py` 检查配置
2. 查看 `logs/sync.log` 日志文件
3. 参考 `DEPLOYMENT.md` 中的故障排查章节
4. 查看其他文档获取详细信息

---

**准备好开始了吗？** 按照上面的3个步骤操作即可！🎯
